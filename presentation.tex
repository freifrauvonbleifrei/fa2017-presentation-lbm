\documentclass[aspectratio=43,t]{beamer}
%\documentclass[aspectratio=43,t,handout]{beamer}

% Language and General Settings
\usepackage[T1]{fontenc} 				% Umlauts and correct hyphenation
\usepackage[utf8]{inputenc} 			% Unicode t
\usepackage{textcomp} 				% Various symbols (e.g. �, �) 
\usepackage{amsmath}				% Math environment
\usepackage{mathtools}				% Math environment for curly brackets
\usepackage{bm}					% Boldface inside math environment
\usepackage{amssymb} 				% Various mathematical symbols
\usepackage{hyperref} %\usepackage[hidelinks]{hyperref}			% Links within document not labeled
\usepackage[final]{microtype}			% Better justification
\usepackage{color}					% Enables definition of own colors

% Listings
\usepackage{listings} 					% Program code environment
\lstset{
	language=C++, 
	showstringspaces=false,
	breaklines=true,
	basicstyle=\tiny\ttfamily,
	keywordstyle=\color{blue},
	stringstyle=\color{red},
	commentstyle=\color{green},
	morecomment=[l][\color{magenta}]{\#},
	title=\lstname}

% Images/ Plots
\usepackage{pgfplots}					% Enables including of tikz-images
\usetikzlibrary{calc}
\pgfplotsset{compat=newest}%
\pgfplotsset{table/search path ={../}}		% Search path for data is lowest directory now
\newlength\figureheight 				% Command to adjust the size of pgf-plots
\newlength\figurewidth
\usepackage{graphicx}					% Enables including of various graphics formats
\usepackage{caption}					% Enables including of various graphics formats
\usepackage{subcaption}				% Enables subfigures
\usepackage{chngcntr}				% Continuous numbering of images
\usepackage{epstopdf}				% Enables including of eps-images
\graphicspath{img/}					% Path to images
\usepackage{adjustbox}
\usepackage{smartdiagram}
\usepackage{multimedia}

%English version FAU Logo
\usepackage[english]{babel}
%German version FAU Logo
%\usepackage[ngerman]{babel}
\usepackage[backend=biber,sorting=none,doi=true,style=ieee]{biblatex}

% Themes:
%  - fau:          FAU theme
%  - fau-med:      MedFak FAU theme
%  - fau-nat:      NatFak FAU theme
%  - fau-phil:     PhilFak FAU theme
%  - fau-rw:       RWFak FAU theme
%  - fau-rw-jura:  RWFak FB Jura FAU theme
%  - fau-rw-wiso:  RWFak FB WISO FAU theme
%  - fau-tf:       TechFak FAU theme
%
% Options:
%  - image:        Cover image on title page
%  - plain:        Plain title page
%  - longtitle:    Title page layout for long title
\makeatletter
  \def\beamer@calltheme#1#2#3{%
    \def\beamer@themelist{#2}
    \@for\beamer@themename:=\beamer@themelist\do
    {\usepackage[{#1}]{\beamer@themelocation/#3\beamer@themename}}}

  \def\usefolder#1{
    \def\beamer@themelocation{#1}
  }
  \def\beamer@themelocation{}

\usefolder{themefau}
\usetheme[longtitle]{fau-tf}

% Enable semi-transparent animation preview
\setbeamercovered{transparent}

\defbibheading{bibliography}{}
\addbibresource[label=primary]{../literature.bib}

\usepackage{csquotes}																% Avoids warning when using BibLaTeX
\usepackage[noabbrev]{cleveref}																% Have automatic formatting of references: use \cref or \Cref{labellist} instead of \ref 
%\crefname{section}{}{}
\usepackage{siunitx}														% format SI units
\usepackage{smartdiagram}

% Title, authors, and date
\title{From Cellular Automata to the Lattice Boltzmann Method}
\subtitle{BGCE Honours Project}
\author[T. Pollinger, M. Gaißert]{Theresa Pollinger, Marcial Gaißert}
\institute[Ferienakademie 2017]{Ferienakademie Sarntal 2017}
\date{\today}
% Setting right internal properties for the pdf-file
\usepackage{ifpdf}
\ifpdf
\hypersetup{pdfauthor={Theresa Pollinger, Marcial Gaißert}}
\hypersetup{pdftitle={From Cellular Automata to the Lattice Boltzmann Method}}
\fi

\begin{document}
% Title
\maketitle

  { % Outline
    \setbeamertemplate{footline}{}
    \begin{frame}[noframenumbering]{Outline}
      \tableofcontents
    \end{frame}
  }
 
%TODO an Julian schicken, damit er nochmal drüberschaut
%- Intro: game of life video (because looks cool)?
%- Zelluläre Automaten (5 min)
%- Wie funktioniert/was ist? Beispiel, Vor-/Nachteile
%- Lattice gases (5 min)
%- Als erste Annäherung an LBM; noch sehr ähnlich zu zellulärem Automat.
%- LBM (10 min)
% - Stream-Collide scheme in graphics (or @Marcial do we get that earlier on?)
% - show the similarity to Boltzmann equation, introduce important moments, show most important collision operators
% - Nondimensionalization













\begin{section}{The Lattice Boltzmann Method}	
	\begin{frame}{Collide Step}
		\begin{columns}[t,totalwidth=\textwidth]
			\column{.4\linewidth}
			\centering
			\vspace{1cm}\\
			
			Particle distribution function $f_i$:
			discrete in space and time, \textcolor{blue}{continuous in probability values}
			\column{.6\linewidth}
			\only<2>{
				\begin{figure}[htbp]
					\centering
					\setlength\figureheight{0.675\textheight} 
					\setlength\figurewidth{\figureheight} 
					\input{img/lbm-collide-before.tex}%
					\caption*{One collide step for a D2Q9-stencil}
				\end{figure}
			}
			\only<3>{
				\begin{figure}[htbp]
					\centering
					\setlength\figureheight{0.675\textheight} 
					\setlength\figurewidth{\figureheight} 
					\input{img/lbm-collide-after.tex}%
					\caption*{One collide step for a D2Q9-stencil}
				\end{figure}
			}
		\end{columns}
	\end{frame}
	\begin{frame}{Stream Step}
		\begin{columns}[t,totalwidth=\textwidth]
			\column{.4\linewidth}
			\centering
			\vspace{1cm}\\
			Particle distribution function $f_i$:
			\textcolor{red}{discrete in space and time}, continuous in probability values
			\column{.6\linewidth}
			\only<1>{
				\begin{figure}[htbp]
					\centering
					\setlength\figureheight{0.675\textheight} 
					\setlength\figurewidth{\figureheight} 
					\input{img/lbm-stream.tex}%
					\caption*{One stream step for a D2Q9-stencil}
				\end{figure}
			}
			\only<2>{
				\begin{figure}[htbp]
					\centering
					\setlength\figureheight{0.675\textheight} 
					\setlength\figurewidth{\figureheight} 
					\input{img/lbm-stream-after.tex}%
					\caption*{One stream step for a D2Q9-stencil}
				\end{figure}
			}
		\end{columns}
	\end{frame}

	
	\begin{frame}{The Lattice Boltzmann Equation}

			{...is what we get when we apply both steps:}
			\begin{align*}	
			f_i(\bm{x} + \bm{c_i}\Delta t, t + \Delta t) = f_i(\bm{x}, t) + \Omega_i(\bm{x}, t)
			\end{align*}
			\pause
			With collision operator $\Omega_i(\bm{x}, t)$, e.g.:
			\begin{itemize}
				\item BGK: $\Omega (f)={\frac {1}{\tau}}(f_{i}^{\text{eq}}-f_{i}) = \omega (f_{i}^{\text{eq}}-f_{i}) $
				\item TRT: %TODO or leave out
			\end{itemize}
			\pause 
			and the equilibrium particle distribution function $f_{i}^{\text{eq}} = $	%TODO
			\pause 
			\newline\par\smallskip
			{Cf. Boltzmann Equation}
			\begin{align*}%stolen from wikipedia
				{{\frac {\partial f}{\partial t}}+{\frac {\bm {p} }{m}}\cdot \nabla f=\left({\frac {\partial f}{\partial t}}\right)_{ {coll} }}
			\end{align*}
		%B E
		%Collision operators
	\end{frame}
	
	\begin{frame}{Moments - the Interesting Outputs in LBM}
		Density and velocity are given locally
		
		\begin{align*}
		\rho(\bm{x}, t) = \sum_i f_i(\bm{x},t)
		\end{align*}
		\begin{align*}
		\rho \bm{u}(\bm{x}, t) = \sum_i \bm{c_i} f_i(\bm{x},t)
		\end{align*}
	\end{frame}
	
	\begin{frame}{Nondimensionalization -- setting the step size}
		= Normalization in the three physical dimensions time, space, mass \newline
		\par\bigskip
		\pause
		Usual choice:
		\begin{align*}
		\Delta x^*  = 1 = C_x \cdot \Delta x\\ 
		\Delta t^* = 1 = C_t \cdot \Delta t\\ 
		\Delta \rho^* = 1 = C_\rho \cdot \Delta \rho\\ 
		\end{align*}
		\pause
		The kinematic velocity in lattice units is directly linked to $\omega$/$\tau$: %TODO
	\end{frame}
	
\end{section}











  { % Questions?
    \setbeamertemplate{footline}{}
    \begin{frame}[c,noframenumbering]
      \begin{center}
        Thanks for listening.\\
        {\bf Any questions?}
      \end{center}
    \end{frame}

    % References
    \section*{References}
    %TODO List all references or remove slides - I would only mention the references that are actually used for our presentation, my references are already there (Christoph)
    \begin{frame}[noframenumbering]{References}
      \printbibliography
    \end{frame}
  }
\end{document}
